<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁÉ≠ÊêúÈ¢ÑÂÆö V7.1 (‰øÆÂ§çÁâà)</title>
    <style>
        /* ÂÖ®Â±ÄÊ†∑Âºè */
        body { font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", sans-serif; background-color: #F8F8F8; margin: 0; padding: 0; display: flex; justify-content: center; }
        #game-wrapper { max-width: 450px; width: 100%; background-color: white; min-height: 100vh; }
        #game-container { padding: 20px; }

        /* ‰∏ªËèúÂçïÊ†∑Âºè */
        .main-menu { text-align: center; padding: 80px 20px; }
        .menu-title { font-size: 28px; font-weight: bold; color: #111; margin-bottom: 15px; }
        .menu-subtitle { font-size: 15px; color: #888; margin-bottom: 50px; line-height: 1.6; }
        .menu-button { display: block; width: 80%; max-width: 280px; margin: 0 auto 20px auto; padding: 15px 20px; border-radius: 25px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s ease; border: none; }
        .menu-button-primary { background-color: #FF2442; color: white; }
        .menu-button-primary:hover { background-color: #E01E38; transform: translateY(-2px); }
        .menu-button-secondary { background-color: #F0F2F5; color: #333; }
        .menu-button-secondary:hover { background-color: #E5E7EB; transform: translateY(-2px); }

        /* Â∏ñÂ≠êÊ†∑Âºè */
        .post { background-color: white; margin-bottom: 20px; }
        .user-info { display: flex; align-items: center; margin-bottom: 15px; }
        .avatar-placeholder { width: 45px; height: 45px; border-radius: 50%; margin-right: 12px; background-color: #EAEAEA; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #555; }
        .username { font-weight: 600; font-size: 16px; }
        .post-title { font-weight: 600; font-size: 18px; margin-bottom: 10px; color: #111; }
        .post-text { font-size: 15px; margin-bottom: 15px; line-height: 1.6; color: #333; }
        .tags { margin-bottom: 15px; }
        .tag { display: inline-block; background-color: #F0F2F5; color: #586B8A; padding: 4px 12px; border-radius: 15px; font-size: 13px; margin-right: 8px; margin-bottom: 8px; }

        /* ËØÑËÆ∫/ÈÄâÈ°π Ê†∑Âºè */
        .divider { border-top: 1px solid #F0F0F0; margin: 20px 0; }
        .comment-header { font-size: 14px; color: #888; margin-bottom: 20px; }
        .comment { padding: 10px 5px; margin-bottom: 15px; cursor: pointer; display: flex; align-items: flex-start; border-radius: 8px; transition: background-color 0.2s ease; }
        .comment:hover { background-color: #f7f7f7; }
        .comment-content { flex: 1; }
        .comment-user { display: flex; align-items: center; margin-bottom: 5px; }
        .comment-avatar-placeholder { width: 32px; height: 32px; border-radius: 50%; margin-right: 10px; background-color: #EAEAEA; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #555; font-size: 14px; }
        .comment-username { font-weight: 600; font-size: 14px; color: #555; }
        .comment-text { font-size: 14px; line-height: 1.5; padding-left: 42px; }
        .like-icon { font-size: 1.2em; color: #ccc; margin-left: 15px; margin-top: 5px; transition: color 0.2s ease, transform 0.2s ease; }
        .comment:hover .like-icon { color: #FF2442; transform: scale(1.2); }

        /* ÁªìÂ±ÄÊî∂ÈõÜÁïåÈù¢Ê†∑Âºè */
        .collection-wrapper { padding: 20px; }
        .collection-title { font-size: 22px; font-weight: bold; text-align: center; margin-bottom: 10px; }
        .collection-subtitle { font-size: 14px; color: #888; text-align: center; margin-bottom: 30px; }
        .ending-item { border: 1px solid #eee; border-radius: 12px; padding: 15px; margin-bottom: 15px; transition: all 0.3s ease; }
        .ending-item.unlocked { border-color: #FFD3D9; background-color: #FFF8F8; cursor: pointer; }
        .ending-item.unlocked:hover { background-color: #FFF0F2; border-color: #FFC1CC; }
        .ending-item.achieved { border-color: #FF2442; background-color: #FFF0F2; transform: scale(1.02); box-shadow: 0 4px 15px rgba(255, 36, 66, 0.1); }
        .ending-item-title { font-size: 16px; font-weight: bold; }
        .ending-item.unlocked .ending-item-title { color: #FF2442; }
        .ending-item.locked .ending-item-title { color: #aaa; }
        .back-to-menu-btn-wrapper { text-align: center; margin-top: 30px; }

        /* ÁªìÂ±ÄÊµÆÁ™ó Modal Ê†∑Âºè */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 1000; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease; pointer-events: none; }
        .modal-overlay.visible { opacity: 1; pointer-events: auto; }
        .modal-content { background-color: white; padding: 25px; border-radius: 15px; width: 85%; max-width: 400px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); transform: scale(0.9); transition: transform 0.3s ease; }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-title { font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #FF2442; }
        .modal-desc, .modal-clues { font-size: 15px; color: #333; line-height: 1.6; }
        .modal-clues { margin-top: 15px; padding-top: 15px; border-top: 1px solid #f0f0f0; font-size: 14px; color: #666; }
        .modal-clues strong { font-weight: bold; color: #333; }
        .modal-close-btn { display: block; width: 100%; text-align: center; margin-top: 25px; padding: 12px; background-color: #F0F2F5; color: #333; border: none; border-radius: 10px; font-size: 15px; font-weight: 500; cursor: pointer; }

        /* Âä®Áîª‰∏éÊèêÁ§∫ */
        .feedback-toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background-color: rgba(0, 0, 0, 0.75); color: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; z-index: 1000; opacity: 0; animation: fadeInOut 3s forwards; white-space: pre; }
        @keyframes fadeInOut { 10% { opacity: 1; transform: translate(-50%, 0); } 80% { opacity: 1; transform: translate(-50%, 0); } 100% { opacity: 0; transform: translate(-50%, -10px); } }
        .post, .comment, .ending-item, .main-menu { opacity: 0; animation: fadeIn 0.6s forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="game-wrapper">
        <div id="game-container"></div>
    </div>
    <div id="modal-container"></div>

    <script>
        const UNLOCKED_ENDINGS_KEY = 'unlockedEndings_v7';

        const storyData = {
            "start_node": "node_1",
            "endings": {
                "ending_anniversary_surprise": { "title": "ÁªìÂ±Ä‰∏ÄÔºöÂë®Âπ¥ÁöÑÊÉäÂñú", "description": "‰Ω†ÈÄâÊã©‰∫Ü‰ø°‰ªª‰∏éÊ≤üÈÄöÔºåÊúÄÁªàÂèëÁé∞‰∏ÄÂàáÂè™ÊòØ‰∏ÄÂú∫‰∏∫‰Ω†Á≤æÂøÉÂáÜÂ§áÁöÑÂë®Âπ¥Á∫™ÂøµÊó•ÊÉäÂñú„ÄÇ‰Ω†‰ª¨ÁöÑÊÑüÊÉÖÂõ†Ê≠§ÂèòÂæóÊõ¥Âä†ÂùöÂõ∫„ÄÇ", "key_clues": ["‰ºòÂÖàËÄÉËôëÊ≤üÈÄö‰∏éÁªèËê•ÂÖ≥Á≥ª", "Âú®ÂÖ≥ÈîÆÊó∂ÂàªÈÄâÊã©‰∫ÜÁõ∏‰ø°ÂØπÊñπ"] },
                "ending_harsh_reality": { "title": "ÁªìÂ±Ä‰∫åÔºöÊÆãÈÖ∑ÁöÑÁé∞ÂÆû", "description": "‰Ω†ÊïèÈîêÁöÑÁõ¥ËßâÂíåÊûúÊñ≠ÁöÑË∞ÉÊü•ÊúÄÁªàÊè≠ÂºÄ‰∫Ü‰∏çÂ†™ÁöÑÁúüÁõ∏„ÄÇËôΩÁÑ∂ËøáÁ®ãÁóõËã¶Ôºå‰ΩÜ‰Ω†Ëá≥Â∞ë‰∏∫Ëá™Â∑±Ëµ¢Âæó‰∫ÜÂ∞ä‰∏•ÂíåËß£ËÑ±„ÄÇ", "key_clues": ["ÂùöÊåÅË∞ÉÊü•Âπ∂ÂèëÁé∞‰∫ÜÂÜ≥ÂÆöÊÄßËØÅÊçÆ", "Âú®ËØÅÊçÆÈù¢ÂâçÈÄâÊã©‰∫ÜÂãáÊï¢ÂØπË¥®"] },
                "ending_willful_bliss": { "title": "ÁªìÂ±Ä‰∏âÔºöÊÉÖÊÑøÁöÑÂπ∏Á¶è", "description": "‰Ω†ÈÄâÊã©ÂøΩÁï•ÈÇ£‰∫õ‰ª§‰∫∫‰∏çÂÆâÁöÑËõõ‰∏ùÈ©¨ËøπÔºåÂÖ®Ë∫´ÂøÉÂú∞ÊäïÂÖ•Âà∞Áª¥Êä§ÂÖ≥Á≥ª‰∏≠„ÄÇÁîüÊ¥ªÈáçÂΩíÂπ≥ÈùôÔºå‰πüËÆ∏Ôºå‰∏çÁü•ÈÅìÁúüÁõ∏ÊâçÊòØÊúÄÂπ∏Á¶èÁöÑ„ÄÇ", "key_clues": ["ÈÄâÊã©ÂøΩÁï•‰∫ÜÊòéÊòæÁöÑÁñëÁÇπ", "Â∞ÜÂÖ≥Á≥ªÁöÑÁ®≥ÂÆöÁΩÆ‰∫éÁúüÁõ∏‰πã‰∏ä"] },
                "ending_poison_of_suspicion": { "title": "ÁªìÂ±ÄÂõõÔºöÁåúÁñëÁöÑÊØíËçØ", "description": "‰Ω†ÁöÑÁåúÂøåÂÉèÊØíËçØ‰∏ÄÊ†∑‰æµËöÄ‰∫Ü‰Ω†‰ª¨ÁöÑÂÖ≥Á≥ª„ÄÇÊó†ËÆ∫ÁúüÁõ∏Â¶Ç‰ΩïÔºåÊó†‰ºëÊ≠¢ÁöÑ‰∫âÂêµÂíåËØïÊé¢Â∑≤ËÆ©‰∏ÄÂàáÊó†Ê≥ïÊåΩÂõû„ÄÇ", "key_clues": ["ÈááÂèñ‰∫ÜÊûÅÁ´Ø‰∏î‰º§ÂÆ≥ÊÑüÊÉÖÁöÑË∞ÉÊü•ÊñπÂºè", "ËÆ©‰∏ç‰ø°‰ªªÊÑüÂΩªÂ∫ïÊëßÊØÅ‰∫ÜÂÖ≥Á≥ª"] },
                "ending_ambiguous_alliance": { "title": "ÁªìÂ±Ä‰∫îÔºöÊößÊòßÁöÑÁõüÁ∫¶", "description": "Ë∞ÉÊü•ÂèëÁé∞Ôºå‰ªñÁ°ÆÂÆûÂú®Âíå‰∏Ä‰∏™Â•≥‰∫∫ÁßòÂØÜÊé•Ëß¶Ôºå‰ΩÜÂØπÊñπÂ£∞Áß∞ÊòØÂ∏Æ‰ªñÂáÜÂ§áÂàõ‰∏öÁöÑ‰ºô‰º¥„ÄÇ‰Ω†ÈÄâÊã©Áõ∏‰ø°Ëøô‰∏™Ëß£ÈáäÔºå‰ΩÜÊú™Êù•ÂÖÖÊª°‰∫Ü‰∏çÁ°ÆÂÆöÊÄß„ÄÇ", "key_clues": ["ÂèëÁé∞‰∫ÜÊåáÂêëÂ§çÊùÇÁúüÁõ∏ÁöÑÁ∫øÁ¥¢", "ÈÄâÊã©Áõ∏‰ø°‰∫Ü‰∏Ä‰∏™ÂÖÖÊª°È£éÈô©ÁöÑËß£Èáä"] }
            },
            "nodes": {
                "node_1": { "post_author": "@‰ªäÂ§©‰πüË¶ÅÂºÄÂøÉÂëÄ", "post_title": "ÈõÜÁæé‰ª¨ÔºåÊàëÂ•ΩÂÉèÈóªÂà∞‰∫Ü‰∏çËØ•ÈóªÁöÑÂë≥ÈÅì‚Ä¶ ü§î", "post_text": "ÂíåËÄÅÂÖ¨ÁªìÂ©ö‰∏âÂπ¥‰∫ÜÔºåÊÑüÊÉÖ‰∏ÄÁõ¥Ëøò‰∏çÈîô„ÄÇ‰ΩÜÊúÄËøë‰∏ÄÂë®Ôºå‰ªñ‰∏ãÁè≠ÂõûÂÆ∂Ë∫´‰∏äÊÄªÂ∏¶ÁùÄ‰∏ÄÁßçÊàëÈùûÂ∏∏ÈôåÁîüÁöÑËä±ÊûúÈ¶ô„ÄÇÊàëÊï¢ËÇØÂÆöÊàë‰ª¨ÂÆ∂Ê≤°‰∫∫Áî®Ëøô‰∏™Âë≥ÈÅìÁöÑ‰ªª‰Ωï‰∏úË•øÔºå‰πü‰∏çÊòØ‰ªñËá™Â∑±ÁöÑÂè§ÈæôÊ∞¥„ÄÇÊòØÊàëÈºªÂ≠êÂá∫ÈóÆÈ¢ò‰∫ÜÂêóÔºüËøòÊòØÊàëÁúüÁöÑÊÉ≥Â§ö‰∫ÜÔºüÂøÉÈáåÂ†µÂæóÊÖåÔºåÂèà‰∏çÁü•ÈÅìËØ•ÊÄé‰πàÂºÄÂè£ÈóÆ„ÄÇÂßêÂ¶π‰ª¨ÊúâÊ≤°ÊúâÈÅáÂà∞ËøáÁ±ª‰ººÁöÑÊÉÖÂÜµÂïäÔºü", "tags": ["Â©öÂßª", "Â§´Â¶ªÊó•Â∏∏", "ÊÉÖÊÑüÊ±ÇÂä©"], "choices": [ { "comment_author": "@Á¶èÂ∞îÊë©ÊñØÂ∞èÂßê", "comment_text": "Âë≥ÈÅìÊèèËø∞ÂæóËøô‰πàÂÖ∑‰ΩìÔºåËÇØÂÆöÊúâÈóÆÈ¢òÔºÅÂª∫ËÆÆ‰∏ãÊ¨°‰ªñÂõûÊù•ÔºåË£Ö‰Ωú‰∏çÁªèÊÑèÂú∞Êä±Êä±‰ªñÔºåÁÑ∂ÂêéËØ¥Ôºö‚ÄòËÄÅÂÖ¨Ôºå‰Ω†‰ªäÂ§©Ë∫´‰∏äÂë≥ÈÅìÂ•ΩÂ•ΩÈóªÂì¶ÔºåÊç¢Êñ∞È¶ôÊ∞¥Âï¶Ôºü‚Äô Áúã‰ªñÊòØ‰ªÄ‰πàÂèçÂ∫îÔºÅ", "next_node": "node_2a_confront", "effects": { "truth": 10, "trust": -5 } }, { "comment_author": "@‰∫∫Èó¥Ê∏ÖÈÜí", "comment_text": "ÂçÉ‰∏áÂà´ÊâìËçâÊÉäËõá„ÄÇÊâæ‰∏™Êú∫‰ºöÁøªÁøª‰ªñÁöÑËΩ¶ÔºåÁâπÂà´ÊòØÂâØÈ©æÈ©∂ÔºåËøòÊúâ‰ªñÁöÑÂÖ¨ÊñáÂåÖ„ÄÇÊúâÊó∂ÂÄôÁâ©ËØÅÊØîË¥®ÈóÆÊõ¥ÁÆ°Áî®„ÄÇ", "next_node": "node_2b_investigate", "effects": { "truth": 20, "trust": -15 } }, { "comment_author": "@Âø´‰πêÂ∞èÁãó", "comment_text": "ÂìéÂëÄÔºåÂèØËÉΩÂ∞±ÊòØ‰Ω†ÊÉ≥Â§öÂï¶„ÄÇËØ¥‰∏çÂÆöÊòØÂú∞ÈìÅ‰∏ä„ÄÅÁîµÊ¢ØÈáå‰∫∫Â§öËπ≠Âà∞ÁöÑÂë¢ÔºüÂà´Ëá™Â∑±ÂêìËá™Â∑±ÔºåÂÖàËßÇÂØüÂá†Â§©ÂÜçËØ¥„ÄÇ", "next_node": "node_2c_ignore", "effects": { "truth": -5, "trust": 10 } }, { "comment_author": "@ÊÉÖÊÑüÂØºÂ∏àÂ§ßÂßê", "comment_text": "‰∫≤Áà±ÁöÑÔºåÊúâÊó∂ÂÄôÂ§ñÈÉ®ÁöÑ‰ø°Âè∑ÊòØÂÜÖÈÉ®ÂÖ≥Á≥ªÁöÑÊò†Â∞Ñ„ÄÇËØïËØïÂÆâÊéí‰∏Ä‰∏™Êµ™Êº´ÁöÑÊôöÈ§êÔºåÂ•ΩÂ•ΩÊ≤üÈÄö‰∏Ä‰∏ãÔºå‰πüËÆ∏ËÉΩÊâæÂõû‰∏Ä‰∫õÁîúËúúÔºåÁñëËôëÂ∞±Êï£‰∫Ü„ÄÇ", "next_node": "node_2d_romance", "effects": { "truth": 0, "trust": 15 } } ] },
                "node_2a_confront": { "post_author": "@‰ªäÂ§©‰πüË¶ÅÂºÄÂøÉÂëÄ", "post_title": "„ÄêÂêéÁª≠„ÄëÊàëËØïÊé¢ÁùÄÈóÆ‰∫ÜÔºå‰ªñÁöÑÂèçÂ∫îÊúâÁÇπÂ•áÊÄ™‚Ä¶", "post_text": "ÊàëÊåâÁÖßÂßêÂ¶πÁöÑÂª∫ËÆÆÔºåÁ¨ëÁùÄÈóÆ‰ªñÊòØ‰∏çÊòØÊç¢‰∫ÜÊñ∞È¶ôÊ∞¥„ÄÇ‰ªñÊòéÊòæÊÑ£‰∫Ü‰∏Ä‰∏ãÔºåÁúºÁ•ûÊúâÁÇπÈó™Ë∫≤ÔºåÁÑ∂ÂêéÁ´ãÂàªËØ¥Ôºö‚ÄòÂì™ÊúâÔºåÂèØËÉΩÊòØÂºÄ‰ºöÊó∂Á¶ª‰∏Ä‰∏™Â•≥Âêå‰∫ãËøëÔºåËπ≠‰∏äÁöÑÂêß„ÄÇ‚Äô ÁÑ∂ÂêéÂ∞±Ëµ∂Á¥ßËΩ¨ÁßªËØùÈ¢òÈóÆÊàëÊôöÈ•≠ÂêÉ‰∫ÜÊ≤°„ÄÇÂßêÂ¶π‰ª¨ÔºåËøô‰∏™Ëß£Èáä‰Ω†‰ª¨‰ø°ÂêóÔºüÊàëÂøÉÈáåÊõ¥Ê≤°Â∫ï‰∫Ü„ÄÇ", "tags": ["ÂêéÁª≠Êõ¥Êñ∞", "Ê±ÇÂàÜÊûê", "ÁúºÁ•ûÈó™Ë∫≤"], "choices": [ { "comment_author": "@ÁßëÊäÄËææ‰∫∫", "comment_text": "ÁúºÁ•ûÈó™Ë∫≤Â∞±ÊòØÂøÉËôöÔºÅË∂Å‰ªñÊ¥óÊæ°ÁöÑÊó∂ÂÄôÔºåÊ£ÄÊü•‰ªñÊâãÊú∫ÁöÑÊ∂àË¥πËÆ∞ÂΩïÂíåÊâìËΩ¶ËΩØ‰ª∂ÁöÑÁõÆÁöÑÂú∞ÔºåËÇØÂÆöÊúâÁ∫øÁ¥¢„ÄÇ", "next_node": "ending_harsh_reality", "effects": { "truth": 30, "trust": -20 } }, { "comment_author": "@ÂíåÂπ≥‰∏ª‰πâËÄÖ", "comment_text": "Â©öÂßªÁöÑÂü∫Á°ÄÊòØ‰ø°‰ªª„ÄÇÊó¢ÁÑ∂‰ªñËß£Èáä‰∫ÜÔºåÂ∞±ÂÖàÈÄâÊã©Áõ∏‰ø°‰ªñ‰∏ÄÊ¨°Âêß„ÄÇÂ¶ÇÊûúÂÜçÊúâ‰∏ãÊ¨°ÔºåÂÜçÊ∑±Á©∂‰πü‰∏çËøü„ÄÇÈÄºÂæóÂ§™Á¥ßÂèØËÉΩ‰ºö‰º§ÂÆ≥ÊÑüÊÉÖ„ÄÇ", "next_node": "ending_anniversary_surprise", "effects": { "truth": -10, "trust": 20 } }, { "comment_author": "@ÊøÄËøõÊ¥æ", "comment_text": "ËøôÁßçËß£ÈáäÂ§™Êï∑Ë°ç‰∫ÜÔºÅÁõ¥Êé•Êä¢Ëøá‰ªñÊâãÊú∫ÂΩìÈù¢ÂØπË¥®ÔºåÂ¶ÇÊûú‰ªñ‰∏çÊÑøÊÑèÂ∞±ÊòØÂøÉÈáåÊúâÈ¨ºÔºÅ", "next_node": "ending_poison_of_suspicion", "effects": { "truth": 25, "trust": -50 } } ] },
                "node_2b_investigate": { "post_author": "@‰ªäÂ§©‰πüË¶ÅÂºÄÂøÉÂëÄ", "post_title": "„ÄêÂêéÁª≠„ÄëÊàëÊ£ÄÊü•‰∫Ü‰ªñÁöÑËΩ¶ÔºåÂøÉÂáâ‰∫ÜÂçäÊà™ÔºÅ", "post_text": "Ë∂Å‰ªñÂéªÊ¥óÊæ°ÔºåÊàëÂÜ≤‰∏ãÊ•ºÊ£ÄÊü•‰∫Ü‰ªñÁöÑËΩ¶„ÄÇËΩ¶ÈáåÈÇ£ËÇ°È¶ôÂë≥Êõ¥Êµì‰∫ÜÔºÅÊúÄÂÖ≥ÈîÆÁöÑÊòØÔºåÊàëÂú®ÂâØÈ©æÈ©∂ÁöÑÂ∫ß‰ΩçÁºùÈáåÔºåÂèëÁé∞‰∫Ü‰∏ÄÊ†π‰∏çÂ±û‰∫éÊàëÁöÑ„ÄÅÊüìÊàêÈáëËâ≤ÁöÑÈïøÂèëÔºÅÊàëÁöÑÂøÉË∑≥ÂæóÂ•ΩÂø´ÔºåÊâãÈÉΩÂú®Êäñ„ÄÇËøôÁÆóÊòØËØÅÊçÆÂêóÔºüÊàëËØ•ÊÄé‰πàÂäûÂïäÔºü", "tags": ["Á∫øÁ¥¢ÂèëÁé∞", "ÂøÉÁ¢éÊó∂Âàª", "Ê±Ç‰∏ã‰∏ÄÊ≠•"], "choices": [ { "comment_author": "@ËØÅÊçÆÊî∂ËóèÂÆ∂", "comment_text": "ÊãçÁÖßÁïôÂ≠òÔºÅÁÑ∂ÂêéÂéªÊü•‰ªñÁöÑ‰ø°Áî®Âç°Ë¥¶ÂçïÔºåÁúãÁúãÊúÄËøëÊúâÊ≤°ÊúâÈÖíÂ∫ó„ÄÅÈ§êÂéÖÊàñËÄÖ‰π∞Á§ºÁâ©ÁöÑÂèØÁñëÊ∂àË¥π„ÄÇËØÅÊçÆÈìæË¶ÅÂÆåÊï¥ÔºÅ", "next_node": "ending_harsh_reality", "effects": { "truth": 25, "trust": -10 } }, { "comment_author": "@ÊëäÁâåÂêßÂßêÂ¶π", "comment_text": "ËØÅÊçÆÈÉΩËøôÊ†∑‰∫ÜËøòÁ≠â‰ªÄ‰πàÔºüÁõ¥Êé•ÊãøÁùÄÂ§¥ÂèëÂéªË∑ü‰ªñÂØπË¥®ÔºåÁúã‰ªñÊÄé‰πàËß£ÈáäÔºÅ", "next_node": "node_3a_confront_hair", "effects": { "truth": 15, "trust": -5 } }, {"comment_author": "@ÂÜ∑ÈùôËßÇÂØüÂÆ∂", "comment_text": "ÂÖàÂà´Âä®ÔºåÊääÂ§¥ÂèëÊî∂Â•Ω„ÄÇÊú™Êù•Âá†Â§©ÔºåË£Ö‰Ωú‰ªÄ‰πàÈÉΩ‰∏çÁü•ÈÅìÔºå‰ªîÁªÜËßÇÂØü‰ªñÊúâÊ≤°ÊúâÂÖ∂‰ªñÂºÇÂ∏∏Ë°å‰∏∫„ÄÇ‰∏ÄÊ¨°ÊÄßÊî∂ÈõÜÊõ¥Â§öËØÅÊçÆ„ÄÇ", "next_node": "node_2c_ignore", "effects": {"truth": 10, "trust": 0}} ] },
                "node_2c_ignore": { "post_author": "@‰ªäÂ§©‰πüË¶ÅÂºÄÂøÉÂëÄ", "post_title": "„ÄêÂêéÁª≠„ÄëÊàëËØïÁùÄËÆ©Ëá™Â∑±Âà´Â§öÊÉ≥‚Ä¶", "post_text": "Âê¨‰∫ÜÂßêÂ¶πÁöÑÂäùÔºåÊàëÂä™ÂäõÂëäËØâËá™Â∑±ÊòØÊÉ≥Â§ö‰∫Ü„ÄÇËøô‰∏§Â§©ÊàëÊ≤°ÂÜçÊèêÈ¶ôÊ∞¥ÁöÑ‰∫ãÔºåÁîüÊ¥ª‰ºº‰πéÂèàÂõûÂà∞‰∫ÜÊ≠£Â∏∏ÁöÑËΩ®ÈÅì„ÄÇ‰ªñ‰ºº‰πé‰πüÂØüËßâÂà∞ÊàëÁöÑÊÉÖÁª™‰∏çÈ´òÔºåÂõûÂÆ∂ÈÉΩÁâπÂà´ÂáÜÊó∂ÔºåËøò‰∏ªÂä®ÂÅö‰∫ÜÊôöÈ•≠„ÄÇ‰πüËÆ∏ÁúüÁöÑÊòØÊàëÂ§™ÊïèÊÑü‰∫ÜÔºü", "tags": ["Ëá™ÊàëË∞ÉËäÇ", "ÂÖ≥Á≥ªËßÇÂØü"], "choices": [ { "comment_author": "@ÂíåÂπ≥‰∏ª‰πâËÄÖ", "comment_text": "ÁúãÂêßÔºåÊúâÊó∂ÂÄôÁî∑ÁöÑÂ∞±ÊòØÁ•ûÁªèÂ§ßÊù°Ôºå‰Ω†‰∏ÄÊ≤âÈªò‰ªñÂ∞±Áü•ÈÅìÈîô‰∫Ü„ÄÇÁªßÁª≠‰øùÊåÅÔºåÂ§öÁªô‰ªñ‰∏Ä‰∫õÁßØÊûÅÁöÑÂèçÈ¶àÔºåÊääÂÖ≥Á≥ªÊãâÂõûÊù•„ÄÇ", "next_node": "ending_anniversary_surprise", "effects": { "truth": -5, "trust": 15 } }, { "comment_author": "@‰∫∫Èó¥Ê∏ÖÈÜí", "comment_text": "ÂßêÂ¶πÔºåËøôÂè´‚ÄòÂøÉËôöË°®Áé∞‚Äô„ÄÇ‰Ω†‰∏ÄÊúâÂä®ÈùôÔºå‰ªñÂ∞±ÂºÄÂßãÂº•Ë°•„ÄÇÈ¶ôÊ∞¥Âë≥ÁöÑ‰∫ãËøòÊ≤°Ëß£ÂÜ≥Âë¢ÔºåÂà´Ë¢´‰∏ÄÈ°øÊôöÈ•≠Â∞±Á≥äÂºÑËøáÂéª‰∫ÜÔºÅ", "next_node": "node_2a_confront", "effects": { "truth": 5, "trust": -5 } }, { "comment_author": "@Âø´‰πêËá≥‰∏ä", "comment_text": "‰∏çÁÆ°‰ªñÊòØ‰∏çÊòØÂøÉËôöÔºåÁé∞Âú®‰ªñÂØπ‰Ω†Â•Ω‰∏çÂ∞±Ë°å‰∫ÜÔºüÊÉ≥ÈÇ£‰πàÂ§öÂπ≤ÂòõÔºå‰∫´ÂèóÂΩì‰∏ãÂëó„ÄÇÊúâ‰∫õ‰∫ãÔºå‰∏çÁü•ÈÅìÊØîÁü•ÈÅìË¶ÅÂ•Ω„ÄÇ", "next_node": "ending_willful_bliss", "effects": { "truth": -15, "trust": 10 } } ] },
                "node_2d_romance": { "post_author": "@‰ªäÂ§©‰πüË¶ÅÂºÄÂøÉÂëÄ", "post_title": "„ÄêÂêéÁª≠„ÄëÊàë‰ª¨ÁöÑÁÉõÂÖâÊôöÈ§êÂæàÊàêÂäüÔºå‰ΩÜ‚Ä¶", "post_text": "ÊàëÂáÜÂ§á‰∫ÜÁÉõÂÖâÊôöÈ§êÔºåÊ∞îÊ∞õÂæàÂ•ΩÔºåÊàë‰ª¨ËÅä‰∫ÜÂæàÂ§ö„ÄÇ‰ªñÊâøËÆ§ÊúÄËøëÂ∑•‰ΩúÂøôÔºåÂèØËÉΩÂøΩÁï•‰∫ÜÊàë„ÄÇÂÖ≥‰∫éÈ¶ôÊ∞¥Ôºå‰ªñËøòÊòØÂùöÊåÅËØ¥ÊòØÂú®ÁîµÊ¢ØÈáåËπ≠Âà∞ÁöÑ„ÄÇËôΩÁÑ∂Êàë‰ª¨ÁöÑÂÖ≥Á≥ªÁºìÂíå‰∫ÜÂæàÂ§öÔºå‰ΩÜÊàëÂøÉÈáåÁöÑÈÇ£Ê†πÂà∫ËøòÊòØÊ≤°ÊúâÂÆåÂÖ®ÊãîÊéâ„ÄÇ", "tags": ["Â¢ûËøõÊÑüÊÉÖ", "ÁñëËôëÊú™Ê∂à"], "choices": [ { "comment_author": "@Êµ™Êº´Ê¥æ", "comment_text": "ËøôÂ∞±ÊòØÂ•ΩÁöÑÂºÄÂßãÔºÅÊÑüÊÉÖÊòØÈúÄË¶ÅÁªèËê•ÁöÑÔºåÁªßÁª≠‰øùÊåÅËøôÁßçÊµ™Êº´ÁöÑÊ≤üÈÄöÔºå‰ø°‰ªª‰ºöÊÖ¢ÊÖ¢ÂõûÊù•ÁöÑ„ÄÇ", "next_node": "ending_anniversary_surprise", "effects": { "truth": -10, "trust": 25 } }, { "comment_author": "@ÂèåÁÆ°ÈΩê‰∏ã", "comment_text": "‰∏ÄËæπÁ®≥‰Ωè‰ªñÔºå‰∏ÄËæπÁªßÁª≠Ë∞ÉÊü•„ÄÇÊ∏©ÊüîÊòØËø∑ÊÉë‰ªñÁöÑÊ≠¶Âô®ÔºåÁúüÁõ∏ÈúÄË¶ÅËá™Â∑±ÂéªÂØªÊâæ„ÄÇ", "next_node": "node_2b_investigate", "effects": { "truth": 15, "trust": 0 } }, {"comment_author": "@Ê≤üÈÄö‰∏ª‰πâËÄÖ", "comment_text": "Á¨¨‰∫åÂ§©Êâæ‰∏™Êú∫‰ºöÔºåÊ∏©Âíå‰ΩÜËÆ§ÁúüÂú∞ÂëäËØâ‰ªñÔºåËøô‰ª∂‰∫ãËøòÂú®Âõ∞Êâ∞‰Ω†„ÄÇÁúãÁúã‰ªñÊòØÂê¶ÊÑøÊÑèÊèê‰æõÊõ¥Â§öÁªÜËäÇÊù•ÂÆâÊäö‰Ω†„ÄÇ", "next_node": "node_2a_confront", "effects": {"truth": 5, "trust": -5}}] },
                "node_3a_confront_hair": { "post_author": "@‰ªäÂ§©‰πüË¶ÅÂºÄÂøÉÂëÄ", "post_title": "„ÄêÂêéÁª≠„ÄëÂÖ≥‰∫éÈÇ£Ê†πÂ§¥ÂèëÔºå‰ªñÁªô‰∫Ü‰∏Ä‰∏™ÊàëÊ≤°ÊÉ≥Âà∞ÁöÑËß£Èáä‚Ä¶", "post_text": "ÊàëÊãøÁùÄÂ§¥ÂèëÂíå‰ªñÂØπË¥®Ôºå‰ªñÊÑ£‰∫Ü‰∏Ä‰∏ãÔºåÁÑ∂ÂêéËã¶Á¨ëÁùÄËØ¥ÔºåËøôÊòØ‰ªñÂßêÂßêÁöÑ„ÄÇ‰ªñÂßêÂßê‰∏äÂë®ÂõûÂõΩÔºå‰ªñÂéªÊú∫Âú∫Êé•ÁöÑÂ•πÔºåÂßêÂßêÊúÄËøëÂàöÊüì‰∫ÜÈáëÂèë„ÄÇËøô‰∏™Ëß£ÈáäÂê¨Ëµ∑Êù•Â§©Ë°£Êó†ÁºùÔºå‰ΩÜÊàëÊÄªËßâÂæóÂì™Èáå‰∏çÂØπ„ÄÇËøô‰πàÂ∑ßÂêàÂêóÔºü", "tags": ["ÂØπË¥®", "Êñ∞ÁöÑËß£Èáä", "Âçä‰ø°ÂçäÁñë"], "choices": [ {"comment_author": "@ÁªÜËäÇÊéß", "comment_text": "ÈóÆ‰ªñÂßêÂßêÁé∞Âú®Âú®Âì™ÔºåÊàñËÄÖÁõ¥Êé•ÊâìÁîµËØùÁªô‰Ω†ÂßêÂßêÁ°ÆËÆ§‰∏Ä‰∏ã„ÄÇÂ¶ÇÊûú‰ªñÊííË∞éÔºåËÇØÂÆö‰ºöÊºèÂá∫È©¨ËÑö„ÄÇ", "next_node": "ending_harsh_reality", "effects": {"truth": 20, "trust": -15}}, {"comment_author": "@‰ø°‰ªªÊ¥æ", "comment_text": "Âê¨Ëµ∑Êù•ÊòØ‰∏™ÂêàÁêÜÁöÑËß£Èáä„ÄÇÊó¢ÁÑ∂ÊòØ‰∏ÄÂÆ∂‰∫∫ÔºåÂ∞±ÂÖàÁõ∏‰ø°‰ªñÂêß„ÄÇÂà´Âõ†‰∏∫‰∏ÄÊ†πÂ§¥ÂèëÂ∞±ÊØÅ‰∫Ü‰Ω†‰ª¨ÁöÑ‰ø°‰ªª„ÄÇ", "next_node": "ending_anniversary_surprise", "effects": {"truth": -10, "trust": 20}}, {"comment_author": "@Âàõ‰∏öËßÇÂØüÂÆ∂", "comment_text": "Á≠âÁ≠âÔºåÊàëÂê¨ËØ¥‰ªñÊúÄËøëÂ•ΩÂÉèÂú®Êç£Èºì‰ªÄ‰πàÊñ∞È°πÁõÆÔºü‰ºö‰∏ç‰ºöÊòØÂíåÂêà‰ºô‰∫∫ÊúâÂÖ≥ÔºüËøô‰∏™Âêà‰ºô‰∫∫ÊòØÂ•≥ÁöÑÂêóÔºü", "next_node": "node_4a_new_clue", "effects": {"truth": 10, "trust": 5}} ] },
                "node_4a_new_clue": { "post_author": "@‰ªäÂ§©‰πüË¶ÅÂºÄÂøÉÂëÄ", "post_title": "„ÄêÊÉäÂ§©ÈÄÜËΩ¨Ôºü„Äë‰ªñËØ¥È¶ôÊ∞¥Âë≥ÂíåÁßòÂØÜÊé•Ëß¶ÔºåÈÉΩÊòØÂõ†‰∏∫Âú®Âàõ‰∏öÔºÅ", "post_text": "ÊàëÈ°∫ÁùÄÂàõ‰∏öËøôÊù°Á∫øÈóÆ‰∏ãÂéªÔºå‰ªñÁªà‰∫éÂù¶ÁôΩ‰∫ÜÔºÅ‰ªñËØ¥ÊúÄËøëÂú®Âíå‰∏Ä‰∏™Â•≥ÊÄß‰∫ßÂìÅÁªèÁêÜÁßòÂØÜÁ≠πÂ§á‰∏Ä‰∏™È°πÁõÆÔºåÊÉ≥ÁªôÊàë‰∏Ä‰∏™ÊÉäÂñú„ÄÇÈ¶ôÊ∞¥Âë≥ÊòØÊµãËØïÊ†∑ÂìÅÊó∂‰∏çÂ∞èÂøÉÊ≤æ‰∏äÁöÑÔºåÈáëÂèëÊòØÈÇ£‰∏™Â•≥‰∫ßÂìÅÁªèÁêÜÁöÑ„ÄÇ‰ªñËØ¥Áé∞Âú®Ëøò‰∏çËÉΩÂëäËØâÊàëÁªÜËäÇ„ÄÇÂßêÂ¶π‰ª¨ÔºåËøô‰∏™ÁêÜÁî±‰Ω†‰ª¨ËßâÂæóÂèØ‰ø°ÂêóÔºü", "tags": ["Âàõ‰∏öÊïÖ‰∫ã", "Êñ∞ÁöÑË∞úÂõ¢", "ÊúÄÁªàÊäâÊã©"], "choices": [ {"comment_author": "@ÂïÜ‰∏öÂ•≥Âº∫‰∫∫", "comment_text": "Âàõ‰∏öÂàùÊúüÁ°ÆÂÆûÈúÄË¶Å‰øùÂØÜÔºåËøô‰∏™Ëß£ÈáäÊúâ‰∏ÄÂÆöÂêàÁêÜÊÄß„ÄÇÊàëÂª∫ËÆÆ‰Ω†ÈÄâÊã©Áõ∏‰ø°ÔºåÂπ∂ÊîØÊåÅ‰ªñÁöÑ‰∫ã‰∏ö„ÄÇ", "next_node": "ending_ambiguous_alliance", "effects": {"truth": -5, "trust": 25}}, {"comment_author": "@ÂèçÁü´Ëææ‰∫∫", "comment_text": "Áî®Âàõ‰∏öÂΩìÂÄüÂè£‰πüÂ§™ËÄÅÂ•ó‰∫ÜÂêßÔºÅÂì™ÊúâÂàõ‰∏öÊêûÂæóËøô‰πàÁ•ûÁ•ûÁßòÁßòËøòÊ≤æ‰∏ÄË∫´È¶ôÊ∞¥ÁöÑÔºüËøôÁªùÂØπÊòØË∞éË®ÄÔºÅ", "next_node": "ending_harsh_reality", "effects": {"truth": 20, "trust": -20}}, {"comment_author": "@Âíå‰∫ã‰Ω¨", "comment_text": "‰∏çÁÆ°ÊòØ‰∏çÊòØÁúüÁöÑÔºåÂõ†‰∏∫Ëøô‰ª∂‰∫ã‰Ω†‰ª¨Â∑≤ÁªèÂêµÂæóÂ§üÂ§ö‰∫Ü„ÄÇÂÜçÁ∫†Áº†‰∏ãÂéªÂè™‰ºö‰∏§Ë¥•‰ø±‰º§„ÄÇÂà∞Ê≠§‰∏∫Ê≠¢Âêß„ÄÇ", "next_node": "ending_poison_of_suspicion", "effects": {"truth": -10, "trust": -30}} ] },
                "ending_anniversary_surprise": { "is_ending": true }, "ending_harsh_reality": { "is_ending": true }, "ending_willful_bliss": { "is_ending": true }, "ending_poison_of_suspicion": { "is_ending": true }, "ending_ambiguous_alliance": { "is_ending": true }
            }
        };

        let currentNodeId;
        let truth, trust;

        // --- LocalStorage ËæÖÂä©ÂáΩÊï∞ ---
        function getUnlockedEndings() { const data = localStorage.getItem(UNLOCKED_ENDINGS_KEY); return data ? JSON.parse(data) : []; }
        function saveUnlockedEnding(endingId) { const unlocked = getUnlockedEndings(); if (!unlocked.includes(endingId)) { unlocked.push(endingId); localStorage.setItem(UNLOCKED_ENDINGS_KEY, JSON.stringify(unlocked)); } }

        // --- Ê†∏ÂøÉÊ∏∏ÊàèÊµÅÁ®ã ---
        function startGame() { currentNodeId = storyData.start_node; truth = 5; trust = 70; renderNode(currentNodeId); }
        function showFeedback(choice) { if (!choice.effects) return; const truthChange = choice.effects.truth || 0; const trustChange = choice.effects.trust || 0; let parts = []; if (truthChange > 0) parts.push(`ÁúüÁõ∏ +${truthChange}`); else if (truthChange < 0) parts.push(`ÁúüÁõ∏ ${truthChange}`); if (trustChange > 0) parts.push(`‰ø°‰ªª +${trustChange}`); else if (trustChange < 0) parts.push(`‰ø°‰ªª ${trustChange}`); if (parts.length === 0) return; const feedbackText = `[ ${parts.join(', ')} ]`; const toast = document.createElement('div'); toast.className = 'feedback-toast'; toast.textContent = feedbackText; document.body.appendChild(toast); setTimeout(() => toast.remove(), 3000); }

        // --- Ê∏≤ÊüìÂáΩÊï∞ ---
        function renderMainMenu() { const container = document.getElementById('game-container'); container.innerHTML = ''; const menuDiv = document.createElement('div'); menuDiv.className = 'main-menu'; const title = document.createElement('h1'); title.className = 'menu-title'; title.textContent = 'ÁÉ≠ÊêúÈ¢ÑÂÆö'; menuDiv.appendChild(title); const subtitle = document.createElement('p'); subtitle.className = 'menu-subtitle'; subtitle.textContent = '‰Ω†ÈóªÂà∞‰∫Ü‰∏çËØ•ÈóªÂà∞ÁöÑÂë≥ÈÅì‚Ä¶\n‰Ω†ÁöÑÈÄâÊã©ÔºåÂ∞±ÊòØ‰Ω†ÁöÑ‚ÄúÁúüÁõ∏‚Äù„ÄÇ'; menuDiv.appendChild(subtitle); const startBtn = document.createElement('button'); startBtn.className = 'menu-button menu-button-primary'; startBtn.textContent = 'ÂºÄÂßãÊñ∞ÊïÖ‰∫ã'; startBtn.onclick = startGame; menuDiv.appendChild(startBtn); const collectionBtn = document.createElement('button'); collectionBtn.className = 'menu-button menu-button-secondary'; collectionBtn.textContent = 'Êü•ÁúãÁªìÂ±ÄÂõæÈâ¥'; collectionBtn.onclick = () => renderCollectionScreen(null); menuDiv.appendChild(collectionBtn); container.appendChild(menuDiv); }

        function renderCollectionScreen(achievedEndingId) { if (achievedEndingId) { saveUnlockedEnding(achievedEndingId); } const unlocked = getUnlockedEndings(); const container = document.getElementById('game-container'); container.innerHTML = ''; const wrapper = document.createElement('div'); wrapper.className = 'collection-wrapper'; const title = document.createElement('h2'); title.className = 'collection-title'; title.textContent = 'ÁªìÂ±ÄÂõæÈâ¥'; wrapper.appendChild(title); const subtitle = document.createElement('p'); subtitle.className = 'collection-subtitle'; if (achievedEndingId) { subtitle.textContent = `ÊÅ≠Âñú‰Ω†ËææÊàê‰∫ÜÊñ∞ÁöÑÁªìÂ±ÄÔºÅ (${unlocked.length}/${Object.keys(storyData.endings).length} Ëß£ÈîÅ)`; } else { subtitle.textContent = `‰Ω†ÊâÄÈÄâÊã©ÁöÑÔºåÂ∞±ÊòØ‰Ω†ÁöÑ‚ÄúÁúüÁõ∏‚Äù„ÄÇ (${unlocked.length}/${Object.keys(storyData.endings).length} Ëß£ÈîÅ)`; } wrapper.appendChild(subtitle); Object.keys(storyData.endings).forEach((endingId, index) => { const item = document.createElement('div'); item.className = 'ending-item'; item.style.animationDelay = `${index * 0.1}s`; const itemTitle = document.createElement('div'); itemTitle.className = 'ending-item-title'; if (unlocked.includes(endingId)) { item.classList.add('unlocked'); if (endingId === achievedEndingId) { item.classList.add('achieved'); } itemTitle.textContent = storyData.endings[endingId].title; item.onclick = () => showEndingModal(endingId); } else { item.classList.add('locked'); itemTitle.textContent = 'Êú™Áü•ÁöÑ‚ÄúÁúüÁõ∏‚Äù'; } item.appendChild(itemTitle); wrapper.appendChild(item); }); const btnWrapper = document.createElement('div'); btnWrapper.className = 'back-to-menu-btn-wrapper'; const backToMenuBtn = document.createElement('button'); backToMenuBtn.className = 'menu-button menu-button-primary'; backToMenuBtn.textContent = 'ËøîÂõû‰∏ªËèúÂçï'; backToMenuBtn.onclick = renderMainMenu; btnWrapper.appendChild(backToMenuBtn); wrapper.appendChild(btnWrapper); container.appendChild(wrapper); }

        function showEndingModal(endingId) { const endingData = storyData.endings[endingId]; const modalContainer = document.getElementById('modal-container'); modalContainer.innerHTML = ''; const overlay = document.createElement('div'); overlay.className = 'modal-overlay'; const content = document.createElement('div'); content.className = 'modal-content'; const title = document.createElement('h3'); title.className = 'modal-title'; title.textContent = endingData.title; content.appendChild(title); const desc = document.createElement('p'); desc.className = 'modal-desc'; desc.textContent = endingData.description; content.appendChild(desc); const clues = document.createElement('div'); clues.className = 'modal-clues'; clues.innerHTML = `<strong>‰Ω†ÁöÑÈÄâÊã©:</strong> ${endingData.key_clues.join('Ôºõ')}`; content.appendChild(clues); const closeBtn = document.createElement('button'); closeBtn.className = 'modal-close-btn'; closeBtn.textContent = 'ÂÖ≥Èó≠'; content.appendChild(closeBtn); overlay.appendChild(content); modalContainer.appendChild(overlay); setTimeout(() => overlay.classList.add('visible'), 10); const closeModal = () => { overlay.classList.remove('visible'); setTimeout(() => modalContainer.innerHTML = '', 300); }; overlay.onclick = (e) => { if (e.target === overlay) closeModal(); }; closeBtn.onclick = closeModal; }

        function renderNode(nodeId) {
            window.scrollTo(0, 0); 
            const node = storyData.nodes[nodeId];
            if (!node) { console.error("ÈîôËØØ: Êâæ‰∏çÂà∞ËäÇÁÇπID:", nodeId); return; } 
            
            if (node.is_ending) {
                renderCollectionScreen(nodeId);
                return;
            }

            const container = document.getElementById('game-container');
            container.innerHTML = '';
            
            const postDiv = document.createElement('div'); 
            postDiv.className = 'post'; 
            
            const userInfo = document.createElement('div'); 
            userInfo.className = 'user-info'; 
            
            const avatar = document.createElement('div'); 
            avatar.className = 'avatar-placeholder'; 
            avatar.textContent = (node.post_author.charAt(1) || '‰∏ª'); 
            
            const username = document.createElement('span'); 
            username.className = 'username'; 
            username.textContent = node.post_author; 
            
            userInfo.appendChild(avatar); 
            userInfo.appendChild(username); 
            postDiv.appendChild(userInfo); 
            
            if (node.post_title) { 
                const postTitle = document.createElement('h2'); 
                postTitle.className = 'post-title'; 
                postTitle.textContent = node.post_title; 
                postDiv.appendChild(postTitle); 
            } 
            
            if (node.post_text) { 
                const postText = document.createElement('p'); 
                postText.className = 'post-text'; 
                postText.innerHTML = node.post_text.replace(/\n/g, '<br>'); 
                postDiv.appendChild(postText); 
            } 
            
            if (node.tags && node.tags.length > 0) { 
                const tagsDiv = document.createElement('div'); 
                tagsDiv.className = 'tags'; 
                node.tags.forEach(tagText => { 
                    const tagSpan = document.createElement('span'); 
                    tagSpan.className = 'tag'; 
                    tagSpan.textContent = `# ${tagText}`; 
                    tagsDiv.appendChild(tagSpan); 
                }); 
                postDiv.appendChild(tagsDiv); 
            } 
            
            container.appendChild(postDiv); 
            
            if (node.choices) { 
                const divider = document.createElement('div'); 
                divider.className = 'divider'; 
                container.appendChild(divider); 
                
                const commentHeader = document.createElement('div'); 
                commentHeader.className = 'comment-header'; 
                commentHeader.textContent = `ÁÉ≠Èó®ËØÑËÆ∫ (${node.choices.length})`; 
                container.appendChild(commentHeader); 
                
                node.choices.forEach(choice => { 
                    const commentDiv = document.createElement('div'); 
                    commentDiv.className = 'comment'; 
                    commentDiv.onclick = () => { 
                        if (choice.effects) { 
                            truth += choice.effects.truth || 0; 
                            trust += choice.effects.trust || 0; 
                        } 
                        showFeedback(choice); 
                        currentNodeId = choice.next_node; 
                        renderNode(currentNodeId); 
                    }; 
                    
                    const commentContent = document.createElement('div'); 
                    commentContent.className = 'comment-content'; 
                    
                    const commentUser = document.createElement('div'); 
                    commentUser.className = 'comment-user'; 
                    
                    const commentAvatar = document.createElement('div'); 
                    commentAvatar.className = 'comment-avatar-placeholder'; 
                    commentAvatar.textContent = choice.comment_author.charAt(1) || 'Âèã'; 
                    
                    const commentUsername = document.createElement('span'); 
                    commentUsername.className = 'comment-username'; 
                    commentUsername.textContent = choice.comment_author; 
                    
                    commentUser.appendChild(commentAvatar); 
                    commentUser.appendChild(commentUsername); 
                    commentContent.appendChild(commentUser); 
                    
                    const commentText = document.createElement('p'); 
                    commentText.className = 'comment-text'; 
                    commentText.textContent = choice.comment_text; 
                    commentContent.appendChild(commentText); 
                    
                    commentDiv.appendChild(commentContent); 
                    
                    const likeIcon = document.createElement('span'); 
                    likeIcon.className = 'like-icon'; 
                    likeIcon.textContent = '‚ù§Ô∏è'; 
                    commentDiv.appendChild(likeIcon); 
                    
                    container.appendChild(commentDiv); 
                }); 
            }
        }
        
        // Ê∏∏ÊàèÂêØÂä®Êó∂ÔºåÈ¶ñÂÖàÊ∏≤Êüì‰∏ªËèúÂçï
        renderMainMenu();
    </script>
</body>
</html>